(function e(t,n,r){function o(a,f){if(!n[a]){if(!t[a]){var l=typeof require==i&&require;if(!f&&l)return l(a,!0);if(u)return u(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var d=n[a]={exports:{}};t[a][0].call(d[s],function(e){var n=t[a][1][e];return o(n?n:e)},d,d[s],e,t,n,r)}return n[a][s]}var i="function",s="exports",u=typeof require==i&&require;for(var a=0;a<r.length;a++)o(r[a]);return o})({1:[function(e,t,n){var r="prototype",i="images",s="centralSprite",o="getCentralPosition",u="canvas",a="height",f="canvasPositionToMapPosition",l="floor",c="getBelowViewport",h="getRandomlyInTheCentreOfCanvas",p="getAboveViewport";CanvasRenderingContext2D[r].storeLoadedImage=function(e,t){this[i]||(this[i]={}),this[i][e]=t},CanvasRenderingContext2D[r].getLoadedImage=function(e){if(this[i][e])return this[i][e]},CanvasRenderingContext2D[r].followSprite=function(e){this[s]=e},CanvasRenderingContext2D[r][o]=function(){return{map:this[s].mapPosition,canvas:[Math.round(this[u].width*.5),Math.round(this[u][a]*.5),0]}},CanvasRenderingContext2D[r].mapPositionToCanvasPosition=function(e){var t=this[o](),n=t.map,r=t[u],i=n[0]-e[0],s=n[1]-e[1];return[r[0]-i,r[1]-s]},CanvasRenderingContext2D[r][f]=function(e){var t=this[o](),n=t.map,r=t[u],i=r[0]-e[0],s=r[1]-e[1];return[n[0]-i,n[1]-s]},CanvasRenderingContext2D[r].getCentreOfViewport=function(){return(this[u].width/2)[l]()},CanvasRenderingContext2D[r].getMiddleOfViewport=function(){return(this[u][a]/2)[l]()},CanvasRenderingContext2D[r][c]=function(){return this[u][a][l]()},CanvasRenderingContext2D[r].getMapBelowViewport=function(){var e=this[c]();return this[f]([0,e])[1]},CanvasRenderingContext2D[r][h]=function(e){var t=0,n=this[u].width;return e&&(t-=e,n+=e),Number.random(t,n)},CanvasRenderingContext2D[r].getRandomlyInTheCentreOfMap=function(e){var t=this[h](e);return this[f]([t,0])[0]},CanvasRenderingContext2D[r].getRandomMapPositionBelowViewport=function(){var e=this[h](),t=this[c]();return this[f]([e,t])},CanvasRenderingContext2D[r].getRandomMapPositionAboveViewport=function(){var e=this[h](),t=this[p]();return this[f]([e,t])},CanvasRenderingContext2D[r].getTopOfViewport=function(){return this[f]([0,0])[1]},CanvasRenderingContext2D[r][p]=function(){return 0-(this[u][a]/4)[l]()}},{}],2:[function(e,t,n){Function.prototype.method=function(e,t){return this.prototype[e]=t,this},Object.method("superior",function(e){var t=this,n=t[e];return function(){return n.apply(t,arguments)}})},{}],3:[function(e,t,n){var r="getCentreOfViewport",i="addStaticObject",s="push",o="hitBehaviour",u="setMapPosition",a="setMapPositionTarget",f="cycle",l="each",c="draw",h="main",p=e("./spriteArray"),d=e("eventedloop");(function(e){function t(e,t){var n=new p,v=new p,m=new p,g=e.getContext("2d"),y=g[r](),b=0,w=!1,E=this,S=[],x=[],T=new d;this[i]=function(e){n[s](e)},this.addStaticObjects=function(e){e.forEach(this[i].bind(this))},this.addMovingObject=function(e,t){t&&n.onPush(function(n){n.data&&n.data[o][t]&&n.onHitting(e,n.data[o][t])},!0),v[s](e)},this.addUIElement=function(e){m[s](e)},this.beforeCycle=function(e){S[s](e)},this.afterCycle=function(e){x[s](e)},this.setMouseX=function(e){y=e},this.setMouseY=function(e){b=e},t[u](0,0),t[a](0,-10),g.followSprite(t);var N=0;this[f]=function(){S[l](function(e){e()});var e=g.canvasPositionToMapPosition([y,b]);t.isJumping||t[a](e[0],e[1]),N++,t[f](),v[l](function(e,t){e[f](g)}),n.cull(),n[l](function(e,t){e[f]&&e[f]()}),m[l](function(e,t){e[f]&&e[f]()}),x[l](function(e){e()})},E[c]=function(){e.width=e.width,t[c](g),t[f](),v[l](function(e,t){e[c](g)}),n[l](function(e,t){e[c]&&e[c](g,h)}),m[l](function(e,t){e[c]&&e[c](g,h)})},this.start=function(){T.start()},this.pause=function(){w=!0,T.stop()},this.isPaused=function(){return w},this.reset=function(){w=!1,n=new p,v=new p,y=g[r](),b=0,t.reset(),t[u](0,0,0),this.start()}.bind(this),T.on("20",this[f]),T.on("20",this[c])}e.game=t})(this),typeof t!="undefined"&&(t.exports=this.game)},{"./spriteArray":12,eventedloop:16}],4:[function(e,t,n){(function(e){function t(){var e=function(){return Math.floor(Math.random()*65536).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}e.guid=t})(this),typeof t!="undefined"&&(t.exports=this.guid)},{}],5:[function(e,t,n){function a(e){var t=this;return t.lines=e.initialLines,t.top=e[r].top,t[i]=e[r][i],t[s]=e[r][s],t.left=e[r].left,t[o]=e[o],t[u]=e[u],t.setLines=function(e){t.lines=e},t.draw=function(e){e.font="11px monospace";var n=0;t.lines.each(function(r){var a=+e.font.slice(0,2),f=e.measureText(r)[o],l=a*1.5,c,h;t.top?h=t.top+n:t[s]&&(h=e.canvas[u]-t.top-l+n),t[i]?c=e.canvas[o]-t[i]-f:t.left&&(c=t.left),n+=l,e.fillText(r,c,h)})},t}var r="position",i="right",s="bottom",o="width",u="height";typeof t!="undefined"&&(t.exports=a)},{}],6:[function(e,t,n){function s(){return navigator[i][r](/Android/i)||navigator[i][r](/webOS/i)||navigator[i][r](/iPhone/i)||navigator[i][r](/iPad/i)||navigator[i][r](/iPod/i)||navigator[i][r](/BlackBerry/i)||navigator[i][r](/Windows Phone/i)?!0:!1}var r="match",i="userAgent";t.exports=s},{}],7:[function(e,t,n){var r="isEating",i=!1,s=e("./sprite");(function(e){function t(e){function f(e){u+=1,t[r]=!0,t.isMoving=i,u<6?setTimeout(function(){f(e)},300):(u=0,t[r]=i,t.isMoving=!0,e())}var t=new s(e),n=t.superior("draw"),o=1,u=0,a=6;return t[r]=i,t.isFull=i,t.setSpeed(a),t.draw=function(e){var i=function(){var e=t.movingToward[0]-t.canvasX;if(t[r])return"eating"+u;o+.1>2?o=.1:o+=.1;if(e>=0)return"sEast"+Math.ceil(o);if(e<0)return"sWest"+Math.ceil(o)};return n(e,i())},t.startEating=f,t}e.monster=t})(this),typeof t!="undefined"&&(t.exports=this.monster)},{"./sprite":11}],8:[function(e,t,n){(function(){var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{};while(r--)e=n[r],i[e]||(i[e]=t)})()},{}],9:[function(e,t,n){var r="undefined",i="vibrate",s=!1,o="superior",u="cycle",a="getSpeedX",f="getSpeedY",l=!0,c="isMoving",h="hasBeenHit",p="isJumping",d="isPerformingTrick",v="onHitObstacleCb",m="setSpeed",g="setMapPosition",y="getSpeed",b="direction",w="east",E="esEast",S="sEast",x="south",T="sWest",N="wsWest",C="west",k="movingToward",L="mapPosition",A="jumping",O="speed",M="setMapPositionTarget",_="isBeingEaten",D="resetSpeed",P="hasHitObstacle",H=e("./sprite");typeof navigator!==r?navigator[i]=navigator[i]||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate:navigator={vibrate:s},function(e){function t(e){function G(){n[m](z),n[c]=l,n[h]=s,n[p]=s,n[d]=s,I&&clearInterval(I),n[g](undefined,undefined,0)}function Y(){n[c]=s,n[h]=l,n[p]=s,n[d]=s,I&&clearInterval(I),n[g](undefined,undefined,0)}function Z(){var e=n[y]();n[m](e+2),n.setSpeedY(e+2),n[c]=l,n[h]=s,n[p]=l,n[g](undefined,undefined,1)}function et(){if(n[b])return n[b]<=90?w:n[b]>90&&n[b]<150?E:n[b]>=150&&n[b]<180?S:n[b]===180?x:n[b]>180&&n[b]<=210?T:n[b]>210&&n[b]<270?N:n[b]>=270?C:x;var e=n[k][0]-n[L][0],t=n[k][1]-n[L][1];return t<=0?e>0?w:C:j[E](e)?E:j[S](e)?S:j[N](e)?N:j[T](e)?T:x}function tt(e){t[e]&&n.setDirection(t[e]),e===C||e===w?n[c]=s:n[c]=l}function nt(){return"blank"}function rt(){return A}function it(){return console.log("Trick step is",Q),Q===0?A:Q===1?"somersault1":"somersault2"}function st(e,t,r){return r===0||r===1?t:(e<t&&(e+=n[y]()*(r/X)),e>t&&(e-=n[y]()*(r/X)),e)}var t={west:270,wsWest:240,sWest:195,south:180,sEast:165,esEast:120,east:90},n=new H(e),r={draw:n[o]("draw"),cycle:n[o](u),getSpeedX:n[o](a),getSpeedY:n[o](f),hits:n[o]("hits")},j={esEast:function(e){return e>300},sEast:function(e){return e>75},wsWest:function(e){return e<-300},sWest:function(e){return e<-75}},F,I,q=l,R=[],U=0,z=5,W=2,X=70,V=0,$=0,J=0,K=1,Q=0;return n[c]=l,n[h]=s,n[p]=s,n[d]=s,n[v]=function(){},n[m](z),n.reset=function(){R=[],U=0,n[c]=l,n[h]=s,q=l,G()},n.stop=function(){n[b]>180?tt(C):tt(w)},n.turnEast=function(){var e=et();switch(e){case C:tt(N);break;case N:tt(T);break;case T:tt(x);break;case x:tt(S);break;case S:tt(E);break;case E:tt(w);break;default:tt(x)}},n.turnWest=function(){var e=et();switch(e){case w:tt(E);break;case E:tt(S);break;case S:tt(x);break;case x:tt(T);break;case T:tt(N);break;case N:tt(C);break;default:tt(x)}},n.stepWest=function(){n[L][0]-=n[O]*2},n.stepEast=function(){n[L][0]+=n[O]*2},n[M]=function(e,t){if(n[h])return;Math.abs(n[L][0]-e)<=75&&(e=n[L][0]),n[k]=[e,t]},n.startMovingIfPossible=function(){!n[h]&&!n[_]&&(n[c]=l)},n.setTurnEaseCycles=function(e){X=e},n.getPixelsTravelledDownMountain=function(){return U},n[D]=function(){n[m](z)},n[u]=function(){n[a]()<=0&&n[f]()<=0&&(n[c]=s),n[c]&&(U+=n[O]),n[p]&&n[M](undefined,n[L][1]+n[y]()),r[u](),n.checkHittableObjects()},n.draw=function(e){var t=function(){return n[_]?nt():n[p]?n[d]?it():rt():n[h]?"hit":et()};return r.draw(e,t())},n.hits=function(e){return R.indexOf(e.id)!==-1?s:e.occupiesZIndex(n[L][2])?r.hits(e)?l:s:s},n.speedBoost=function(){var e=n[O];q&&(q=s,n[m](n[O]*W),setTimeout(function(){n[m](e),setTimeout(function(){q=l},1e4)},2e3))},n.attemptTrick=function(){n[p]&&(n[d]=l,I=setInterval(function(){Q>=2?Q=0:Q+=1},300))},n[a]=function(){return et()===E||et()===N?($=.5,V=st(V,n[y]()*$,$),V):et()===S||et()===T?($=.33,V=st(V,n[y]()*$,$),V):(V=st(V,0,$),V)},n.setSpeedY=function(e){J=e},n[f]=function(){var e;return n[p]?J:et()===E||et()===N?(K=.6,J=st(J,n[y]()*.6,.6),J):et()===S||et()===T?(K=.85,J=st(J,n[y]()*.85,.85),J):et()===w||et()===C?(K=1,J=0,J):(J=st(J,n[y](),K),J)},n[P]=function(e){Y(),navigator[i]&&navigator[i](500),R.push(e.id),n[D](),n[v](e),F&&clearTimeout(F),F=setTimeout(function(){G()},1500)},n.hasHitJump=function(){Z(),F&&clearTimeout(F),F=setTimeout(function(){G()},1e3)},n.isEatenBy=function(e,t){n[P](e),e.startEating(t),R.push(e.id),n[c]=s,n[_]=l},n.reset=function(){R=[],U=0,n[c]=l,n[p]=s,n[h]=s,q=l},n.setHitObstacleCb=function(e){n[v]=e||function(){}},n}e.skier=t}(this),typeof t!==r&&(t.exports=this.skier)},{"./sprite":11}],10:[function(e,t,n){var r="cycle",i="movingToward",s="mapPosition",o="setMapPositionTarget",u="snowboarder",a=e("./sprite");(function(e){function t(e){function l(){var e=t[i][0]-t[s][0],n=t[i][1]-t[s][1];return u.sEast(e)?"sEast":"sWest"}var t=new a(e),n={draw:t.superior("draw"),cycle:t.superior(r)},u={sEast:function(e){return e>0},sWest:function(e){return e<=0}},f=3;return t.setSpeed(f),t[r]=function(e){Number.random(10)===1&&(t[o](e.getRandomlyInTheCentreOfMap()),t.setSpeed(f+Number.random(-1,1))),t[o](undefined,e.getMapBelowViewport()+600),n[r]()},t.draw=function(e){var t=function(){return l()};return n.draw(e,t())},t}e[u]=t})(this),typeof t!="undefined"&&(t.exports=this[u])},{"./sprite":11}],11:[function(e,t,n){var r="direction",i="mapPosition",s="canvasX",o="canvasY",u="height",a="speed",f="data",l="movingToward",c="movingWithConviction",h=!1,p="deleted",d="parts",v="isMoving",m=!0,g="zIndexesOccupied",y="hitBoxes",b="undefined",w="getSpeedX",E="getSpeedY",S="setMapPosition",x="setCanvasPosition",T="first",N="getCanvasPositionX",C="getCanvasPositionY",k="getLeftHitBoxEdge",L="getTopHitBoxEdge",A="getRightHitBoxEdge",O="getBottomHitBoxEdge",M="checkHittableObjects",_="object",D="setMapPositionTarget",P="sprite",H="hitBehaviour";(function(t){function R(e){function q(e){H[s]+=e.toNumber()}function R(e){H[o]+=e.toNumber()}function U(t){if(H[f][y]&&e[y][t])return e[y][t]}function z(e){return e=Math.round(e*2)/2,e}function W(){if(!H[v])return;var e=H[i][0],t=H[i][1];if(typeof H[r]!==b){var n=H[r]-90;n<0&&(n=360+n),e+=z(H[a]*Math.cos(n*(Math.PI/180))),t+=z(H[a]*Math.sin(n*(Math.PI/180)))}else typeof H[l][0]!==b&&(e>H[l][0]?e-=Math.min(H[w](),Math.abs(e-H[l][0])):e<H[l][0]&&(e+=Math.min(H[w](),Math.abs(e-H[l][0])))),typeof H[l][1]!==b&&(t>H[l][1]?t-=Math.min(H[E](),Math.abs(t-H[l][1])):t<H[l][1]&&(t+=Math.min(H[E](),Math.abs(t-H[l][1]))));H[S](e,t)}var t={},P=[0],H=this,I;return H[r]=undefined,H[i]=[0,0,0],H.id=n(),H[s]=0,H[o]=0,H.canvasZ=0,H[u]=0,H[a]=0,H[f]=e||{parts:{}},H[l]=[0,0],H.metresDownTheMountain=0,H[c]=h,H[p]=h,H.maxHeight=function(){return Object.values(H[f][d]).map(function(e){return e[3]}).max()}(),H[v]=m,H[f][d]||(H[f][d]={}),e&&e.id&&(H.id=e.id),e&&e[g]&&(P=e[g]),this.draw=function(e,t){var n=H[f][d][t];H[u]=n[3],H.width=n[2];var r=e.mapPositionToCanvasPosition(H[i]);H[x](r[0],r[1]),e.drawImage(e.getLoadedImage(H[f].$imageFile),n[0],n[1],n[2],n[3],H[s],H[o],n[2],n[3])},this[S]=function(e,t,n){typeof e===b&&(e=H[i][0]),typeof t===b&&(t=H[i][1]),typeof n===b?n=H[i][2]:H[g]=[n],H[i]=[e,t,n]},this[x]=function(e,t){e&&(!Object.isString(e)||e[T]()!=="+"&&e[T]()!=="-"?H[s]=e:q(e)),t&&(!Object.isString(t)||t[T]()!=="+"&&t[T]()!=="-"?H[o]=t:R(t))},this[N]=function(){return H[s]},this[C]=function(){return H[o]},this[k]=function(e){e=e||0;var t=this[N]();return U(e)&&(t+=U(e)[0]),t},this[L]=function(e){e=e||0;var t=this[C]();return U(e)&&(t+=U(e)[1]),t},this[A]=function(e){return e=e||0,U(e)?H[s]+U(e)[2]:H[s]+H.width},this[O]=function(e){return e=e||0,U(e)?H[o]+U(e)[3]:H[o]+H[u]},this.getPositionInFrontOf=function(){return[H[s],H[o]+H[u]]},this.setSpeed=function(e){H[a]=e,H.speedX=e,H.speedY=e},this.incrementSpeedBy=function(e){H[a]+=e},H.getSpeed=function(){return H[a]},H[w]=function(){return H[a]},H[E]=function(){return H[a]},this.setHeight=function(e){H[u]=e},this.setWidth=function(e){H.width=e},this.getMaxHeight=function(){return H.maxHeight},H.getMovingTowardOpposite=function(){if(!H[v])return[0,0];var e=H[l][0]-H[i][0],t=H[l][1]-H[i][1],n=Math.abs(e)>75?0-e:0,r=-t;return[n,r]},this[M]=function(){Object.keys(t,function(e,n){n[_][p]?delete t[e]:n[_].hits(H)&&n.callbacks.each(function(e){e(H,n[_])})})},this.cycle=function(){H[M](),I&&H[D](I[i][0],I[i][1],m),W()},this[D]=function(e,t,n){n&&(H[c]=h),H[c]||(typeof e===b&&(e=H[l][0]),typeof t===b&&(t=H[l][1]),H[l]=[e,t],H[c]=h)},this.setDirection=function(e){e>=360&&(e=360-e),H[r]=e,H[l]=undefined},this.resetDirection=function(){H[r]=undefined},this.setMapPositionTargetWithConviction=function(e,t){H[D](e,t),H[c]=m},this.follow=function(e){I=e},this.stopFollowing=function(){I=h},this.onHitting=function(e,n){if(t[e.id])return t[e.id].callbacks.push(n);t[e.id]={object:e,callbacks:[n]}},this.deleteOnNextCycle=function(){H[p]=m},this.occupiesZIndex=function(e){return P.indexOf(e)>=0},this.hits=function(e){var t=h,n=h;return e[L](H[i][2])<=H[O](H[i][2])&&e[O](H[i][2])>=H[O](H[i][2])&&(t=m),e[L](H[i][2])<=H[L](H[i][2])&&e[O](H[i][2])>=H[L](H[i][2])&&(t=m),e[k](H[i][2])<=H[A](H[i][2])&&e[A](H[i][2])>=H[A](H[i][2])&&(n=m),e[k](H[i][2])<=H[k](H[i][2])&&e[A](H[i][2])>=H[k](H[i][2])&&(n=m),t&&n},this.isAboveOnCanvas=function(e){return H[o]+H[u]<e},this.isBelowOnCanvas=function(e){return H[o]>e},H}var n=e("./guid");R.createObjects=function(t,n){function r(e){var t=n.position;if(Number.random(100+n.rateModifier)<=e.dropRate){var r=new R(e[P]);return r.setSpeed(0),Object.isFunction(t)&&(t=t()),r[S](t[0],t[1]),e[P][H]&&e[P][H].skier&&n.player&&r.onHitting(n.player,e[P][H].skier),r}}Array.isArray(t)||(t=[t]),n=Object.merge(n,{rateModifier:0,dropRate:1,position:[0,0]},h,h);var i=t.map(r).remove(undefined);return i},t[P]=R})(this),typeof t!==b&&(t.exports=this[P])},{"./guid":4}],12:[function(e,t,n){var r="pushHandlers",i="prototype",s="spriteArray";(function(e){function t(){return this[r]=[],this}t[i]=Object.create(Array[i]),t[i].onPush=function(e,t){this[r].push(e),t&&this.each(e)},t[i].push=function(e){Array[i].push.call(this,e),this[r].each(function(t){t(e)})},t[i].cull=function(){this.each(function(e,t){if(e.deleted)return delete this[t]})},e[s]=t})(this),typeof t!="undefined"&&(t.exports=this[s])},{}],13:[function(e,t,n){function Q(e,t){function i(){n+=1,n===e.length&&t(r)}var n=0,r={};e.each(function(e){var t=new Image;t.onload=i,t.src=e,j.storeLoadedImage(e,t)})}function G(e,t){t.isEatenBy(e,function(){X-=1,e.isFull=!0,e.isEating=r,t.isBeingEaten=r,e.setSpeed(t.getSpeed()),e.stopFollowing();var n=j[o]();e[u](n[0],n[1])})}function Y(e){function F(){z=r,W=0,X=5,V=localStorage[i](s),A.reset(),A[a](n)}function I(){A.isPaused()||(V=localStorage.setItem(s,W),L.setLines(["Game over!","Hit space to restart"]),A.pause(),A.cycle())}function Q(e,t){var n=Math.max(800-B.width,0);Number.random(1e3+n)<=t&&e()}function Y(){var e=new O(R[f]),n=j[o]();e[l](n[0],n[1]),e.follow(t),e.onHitting(t,G),A[c](e,f)}function Z(){var e=new _(R[h]),n=j[o](),r=j[p]();e[l](n[0],n[1]),e[u](r[0],r[1]),e.onHitting(t,R[h].hitBehaviour.skier),A[c](e)}var t,n,L,A;t=new D(R.skier),t[l](0,0),t[u](0,-10),J&&t.setHitObstacleCb(function(){X-=1}),A=new H(B,t),n=new M(R.signStart),A[a](n),n[l](-50,0),j.followSprite(t),L=new P({initialLines:[d,q,"Travelled 0m",v+V,m+X,g],position:{top:15,right:10}}),A.beforeCycle(function(){var e=[];t.isMoving&&(e=M.createObjects([{sprite:R.smallTree,dropRate:K.smallTree},{sprite:R.tallTree,dropRate:K.tallTree},{sprite:R.jump,dropRate:K.jump},{sprite:R.thickSnow,dropRate:K.thickSnow},{sprite:R.rock,dropRate:K.rock}],{rateModifier:Math.max(800-B.width,0),position:function(){return j[p]()},player:t})),A.addStaticObjects(e),Q(Z,.01),W=parseFloat(t.getPixelsTravelledDownMountain()/U).toFixed(1),A.isPaused()||L.setLines([d,q,"Travelled "+W+"m",m+X,v+V,g,"Current Speed: "+t.getSpeed()])}),A.afterCycle(function(){X===0&&I()}),A.addUIElement(L),$(B).mousemove(function(e){A[b](e.pageX),A[w](e.pageY),t[E](),t[S]()})[y]("click",function(e){A[b](e.pageX),A[w](e.pageY),t[E](),t[S]()}).focus(),k[y]("f",t[x]),k[y]("t",t.attemptTrick),k[y](["w","up"],function(){t.stop()}),k[y](["a","left"],function(){t.direction===270?t.stepWest():t.turnWest()}),k[y](["s","down"],function(){t[T](180),t[S]()}),k[y](["d","right"],function(){t.direction===90?t.stepEast():t.turnEast()}),k[y]("m",Y),k[y]("b",Z),k[y]("space",F);var et=C(B).on("press",function(e){e.preventDefault(),A[b](e[N].x),A[w](e[N].y)}).on("tap",function(e){A[b](e[N].x),A[w](e[N].y)}).on("pan",function(e){A[b](e[N].x),A[w](e[N].y),t[E](),t[S]()}).on("doubletap",function(e){t[x]()});t.isMoving=r,t[T](270),A.start()}function Z(){B.width=window.innerWidth,B.height=window.innerHeight}var r=!1,i="getItem",s="highScore",o="getRandomMapPositionAboveViewport",u="setMapPositionTarget",a="addStaticObject",f="monster",l="setMapPosition",c="addMovingObject",h="snowboarder",p="getRandomMapPositionBelowViewport",d="SkiFree.js",v="High Score: ",m="Skiers left: ",g="Created by Dan Hough (@basicallydan)",y="bind",b="setMouseX",w="setMouseY",E="resetDirection",S="startMovingIfPossible",x="speedBoost",T="setDirection",N="center";e("./lib/canvasRenderingContext2DExtensions"),e("./lib/extenders"),e("./lib/plugins");var C=e("hammerjs"),k=e("br-mousetrap"),L=e("./lib/isMobileDevice"),A=e("./lib/spriteArray"),O=e("./lib/monster"),M=e("./lib/sprite"),_=e("./lib/snowboarder"),D=e("./lib/skier"),P=e("./lib/infoBox"),H=e("./lib/game"),B=document.getElementById("skifree-canvas"),j=B.getContext("2d"),F=["sprite-characters.png","skifree-objects.png"],I=this,q="Use the mouse or WASD to control the player";L()&&(q="Tap or drag on the piste to control the player");var R=e("./spriteInfo"),U=18,z=r,W=0,X=5,V=0,J=r,K={smallTree:4,tallTree:2,jump:1,thickSnow:1,rock:1};localStorage[i](s)&&(V=localStorage[i](s)),window.addEventListener("resize",Z,r),Z(),Q(F,Y),this.exports=window},{"./lib/canvasRenderingContext2DExtensions":1,"./lib/extenders":2,"./lib/game":3,"./lib/infoBox":5,"./lib/isMobileDevice":6,"./lib/monster":7,"./lib/plugins":8,"./lib/skier":9,"./lib/snowboarder":10,"./lib/sprite":11,"./lib/spriteArray":12,"./spriteInfo":14,"br-mousetrap":15,hammerjs:18}],14:[function(e,t,n){var r="sprite-characters.png",i="skifree-objects.png",s="deleteOnNextCycle",o="hitBehaviour",u="monster",a="hasHitObstacle",f="skier",l="hasHitJump",c="spriteInfo";(function(e){function n(e){e[s]()}function h(e,t){t[s]()}function p(e,t){e[a](t)}function d(e,t){t[a](e)}function v(e,t){t[a](e)}function m(e,t){e[l](t)}function g(e,t){t[l](e)}function y(e,t){t[a](e)}var t={skier:{$imageFile:r,parts:{blank:[0,0,0,0],east:[0,0,24,34],esEast:[24,0,24,34],sEast:[49,0,17,34],south:[65,0,17,34],sWest:[49,37,17,34],wsWest:[24,37,24,34],west:[0,37,24,34],hit:[0,78,31,31],jumping:[84,0,32,34],somersault1:[116,0,32,34],somersault2:[148,0,32,34]},hitBoxes:{0:[7,20,27,34]},id:"player",hitBehaviour:{}},smallTree:{$imageFile:i,parts:{main:[0,28,30,34]},hitBoxes:{0:[0,18,30,34]},hitBehaviour:{}},tallTree:{$imageFile:i,parts:{main:[95,66,32,64]},zIndexesOccupied:[0,1],hitBoxes:{0:[0,54,32,64],1:[0,10,32,54]},hitBehaviour:{}},thickSnow:{$imageFile:i,parts:{main:[143,53,43,10]},hitBehaviour:{}},rock:{$imageFile:i,parts:{main:[30,52,23,11]},hitBehaviour:{}},monster:{$imageFile:r,parts:{sEast1:[64,112,26,43],sEast2:[90,112,32,43],sWest1:[64,158,26,43],sWest2:[90,158,32,43],eating1:[122,112,34,43],eating2:[156,112,31,43],eating3:[187,112,31,43],eating4:[219,112,25,43],eating5:[243,112,26,43]},hitBehaviour:{}},jump:{$imageFile:i,parts:{main:[109,55,32,8]},hitBehaviour:{}},signStart:{$imageFile:i,parts:{main:[260,103,42,27]},hitBehaviour:{}},snowboarder:{$imageFile:r,parts:{sEast:[73,229,20,29],sWest:[95,228,26,30]},hitBehaviour:{}},emptyChairLift:{$imageFile:i,parts:{main:[92,136,26,30]},zIndexesOccupied:[1]}};t[u][o].tree=n,t.smallTree[o][u]=h,t.tallTree[o][u]=h,t.smallTree[o][f]=d,t.tallTree[o][f]=d,t.rock[o][f]=v,t.jump[o][f]=g,t.snowboarder[o][f]=y,e[c]=t})(this),typeof t!="undefined"&&(t.exports=this[c])},{}],15:[function(e,t,n){(function(){function B(e,t,n){if(e[f]){e[f](t,n,a);return}e.attachEvent("on"+t,n)}function j(e){return e.type==l?String[c](e[h]):T[e[h]]?T[e[h]]:N[e[h]]?N[e[h]]:String[c](e[h]).toLowerCase()}function F(e,t){return e.sort().join(u)===t.sort().join(u)}function I(e){e=e||{};var t=a,n;for(n in M){if(e[n]){t=p;continue}M[n]=0}t||(P=a)}function q(e,t,n,r,i){var s,o,u=[],a=n.type;if(!A[e])return[];a==d&&X(e)&&(t=[e]);for(s=0;s<A[e][v];++s){o=A[e][s];if(o.seq&&M[o.seq]!=o.level)continue;if(a!=o.action)continue;if(a==l&&!n.metaKey&&!n.ctrlKey||F(t,o.modifiers))r&&o.combo==i&&A[e].splice(s,1),u[m](o)}return u}function R(e){var t=[];return e.shiftKey&&t[m](n),e.altKey&&t[m](i),e.ctrlKey&&t[m](r),e.metaKey&&t[m](s),t}function U(e,t){e(t)===a&&(t[g]&&t[g](),t[y]&&t[y](),t.returnValue=a,t.cancelBubble=p)}function z(e,t){if(Y.stopCallback(t,t.target||t.srcElement))return;var n=q(e,R(t),t),r,i={},s=a;for(r=0;r<n[v];++r){if(n[r].seq){s=p,i[n[r].seq]=1,U(n[r].callback,t);continue}!s&&!P&&U(n[r].callback,t)}t.type==P&&!X(e)&&I(i)}function W(e){e[h]=typeof e[h]=="number"?e[h]:e.keyCode;var t=j(e);if(!t)return;if(e.type==d&&D==t){D=a;return}z(t,e)}function X(e){return e==n||e==r||e==i||e==s}function V(){clearTimeout(_),_=setTimeout(I,1e3)}function $(){if(!L){L={};for(var e in T){if(e>95&&e<112)continue;T.hasOwnProperty(e)&&(L[T[e]]=e)}}return L}function J(e,t,n){return n||(n=$()[e]?b:l),n==l&&t[v]&&(n=b),n}function K(e,t,n,r){M[e]=0,r||(r=J(t[0],[]));var i=function(t){P=r,++M[e],V()},s=function(e){U(n,e),r!==d&&(D=j(e)),setTimeout(I,10)},o;for(o=0;o<t[v];++o)Q(t[o],o<t[v]-1?i:s,r,e,o)}function Q(e,t,r,i,s){e=e.replace(/\s+/g,w);var u=e.split(w),a,f,c,h=[];if(u[v]>1){K(e,u,t,r);return}c=e===o?[o]:e.split(o);for(a=0;a<c[v];++a)f=c[a],k[f]&&(f=k[f]),r&&r!=l&&C[f]&&(f=C[f],h[m](n)),X(f)&&h[m](f);r=J(f,h,r),A[f]||(A[f]=[]),q(f,h,{type:r},!i,e),A[f][i?"unshift":m]({callback:t,modifiers:h,action:r,seq:i,level:s,combo:e})}function G(e,t,n){for(var r=0;r<e[v];++r)Q(e[r],t,n)}var e="enter",n="shift",r="ctrl",i="alt",s="meta",o="+",u=",",a=!1,f="addEventListener",l="keypress",c="fromCharCode",h="which",p=!0,d="keyup",v="length",m="push",g="preventDefault",y="stopPropagation",b="keydown",w=" ",E=":",S="tagName",x="contentEditable",T={8:"backspace",9:"tab",13:e,16:n,17:r,18:i,20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:s,93:s,224:s},N={106:"*",107:o,109:"-",110:".",111:"/",186:";",187:"=",188:u,189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},C={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":u,">":".","?":"/","|":"\\"},k={option:i,command:s,"return":e,escape:"esc"},L,A={},O={},M={},_,D=a,P=a;for(var H=1;H<20;++H)T[111+H]="f"+H;for(H=0;H<=9;++H)T[H+96]=H;B(document,l,W),B(document,b,W),B(document,d,W);var Y={bind:function(e,t,n){return G(e instanceof Array?e:[e],t,n),O[e+E+n]=t,this},unbind:function(e,t){return O[e+E+t]&&(delete O[e+E+t],this.bind(e,function(){},t)),this},trigger:function(e,t){return O[e+E+t](),this},reset:function(){return A={},O={},this},stopCallback:function(e,t){return(w+t.className+w).indexOf(" mousetrap ")>-1?a:t[S]=="INPUT"||t[S]=="SELECT"||t[S]=="TEXTAREA"||t[x]&&t[x]=="true"}};window.Mousetrap=Y,typeof define=="function"&&define.amd&&define("mousetrap",function(){return Y}),typeof t=="object"&&t.exports&&(t.exports=Y)})()},{}],16:[function(e,t,n){var r="inherits",i="prototype",s="undefined",o="removeOne",u="length",a="intervalId",f="intervalLength",l="intervalsToEmit",c="currentTick",h="maxTicks",p="listeningForFocus",d="bind",v="newListener",m="removeListener",g="isStarted",y="start",b="addEventListener",w="EventedLoop";(function(E){(function(){function C(e){var t=1,n=T.min(e);while(t!==0)t=T.reduce(e,function(e,t){return e+t%n},0),t!==0&&(n-=10);return n}function k(e){var t=N.exec(e);if(!t)throw new Error("I don't understand that particular interval");var n=+t[1],r=t[2]||"ms";if(r==="s")n*=1e3;else if(r==="m")n=n*1e3*60;else if(r==="h")n=n*1e3*60*60;else if(!!r&&r!=="ms")throw new Error("You can only specify intervals of ms, s, m, or h");if(n<10||n%10!==0)throw new Error("You can only specify 10s of milliseconds, trust me on this one");return{amount:n,type:r}}function L(){this[a]=undefined,this[f]=undefined,this[l]={},this[c]=1,this[h]=0,this[p]=!1;var e=function(){var e=C(T.keys(this[l])),t=!1;return this[f]?e!==this[f]&&(this[f]=e,t=!0):this[f]=e,this[h]=T.max(T.map(T.keys(this[l]),function(e){return+e}))/this[f],t}[d](this);this.on(v,function(t){if(t===m||t===v)return;var n=k(t),r=n.amount;this[l][+r]=T.union(this[l][+r]||[],[t]),e()&&this[g]()&&this.stop()[y]()}),this.on(m,function(t){if(x.listenerCount(this,t)>0)return;var n=k(t),r=n.amount,i=this[l][+r][o](t);this[l][+r][u]===0&&delete this[l][+r],console.log("Determining interval length after removal of",i),e(),e()&&this[g]()&&this.stop()[y]()})}var S=this,x=e("events").EventEmitter,T=e("underscore"),N=/([0-9\.]+)(ms|s|m|h)?/,S=E||window;typeof Function[i][r]===s&&(Function[i][r]=function(e){this[i]=Object.create(e[i])}),typeof Array[i][o]===s&&(Array[i][o]=function(){var e,t=arguments,n=t[u],r;while(n&&this[u]){e=t[--n];while((r=this.indexOf(e))!==-1)return this.splice(r,1)}}),L[r](x),L[i].tick=function(){var e=this[c]*this[f];return T.each(this[l],function(t,n){e%n===0&&T.each(t,function(e){this.emit(e,e,n)}[d](this))}[d](this)),this[c]+=1,this[c]>this[h]&&(this[c]=1),this},L[i][y]=function(){if(!this[f])throw new Error("You haven't specified any interval callbacks. Use EventedLoop.on('500ms', function () { ... }) to do so, and then you can start");return this[a]?console.log("No need to start the loop again, it's already started."):(this[a]=setInterval(this.tick[d](this),this[f]),S&&!this[p]&&S[b]&&(S[b]("focus",function(){this[y]()}[d](this)),S[b]("blur",function(){this.stop()}[d](this)),this[p]=!0),this)},L[i].stop=function(){return clearInterval(this[a]),this[a]=undefined,this},L[i][g]=function(){return!!this[a]},L[i].every=L[i].on,typeof n!==s&&(typeof t!==s&&t.exports&&(n=t.exports=L),n[w]=L),typeof window!==s&&(window[w]=L)}).call(this)}).call(this,typeof global!==s?global:typeof self!==s?self:typeof window!==s?window:{})},{events:19,underscore:17}],17:[function(e,t,n){var r="length",i=null,s="call",o="apply",u="isFunction",a="prototype",f=!1,l="isArray",c=!0,h="reduceRight",p="_wrapped",d="lastIndexOf",v="identity",m="constructor",g="filter",y="push",b="indexOf",w="contains",E="source",S="concat",x="function",T="[object Boolean]",N="keys",C="isArguments",k="slice",L="[object Array]",A="reduce",O="every",M="escape",_="forEach",D="'+\n((__t=(",P="unescape",H="object",B="templateSettings",j="undefined",F="isObject",I="property",q="random",R="bind",U="matches",z="join",W="has",X="pluck",V="sortedIndex",$="values",J="variable",K="extend";((function(){var e=this,et=e._,tt={},nt=Array[a],rt=Object[a],it=Function[a],st=nt[y],ot=nt[k],ut=nt[S],at=rt.toString,ft=rt.hasOwnProperty,lt=nt[_],ct=nt.map,ht=nt[A],pt=nt[h],dt=nt[g],vt=nt[O],mt=nt.some,gt=nt[b],yt=nt[d],bt=Array[l],wt=Object[N],Et=it[R],St=function(e){if(e instanceof St)return e;if(!(this instanceof St))return new St(e);this[p]=e};typeof n!==j?(typeof t!==j&&t.exports&&(n=t.exports=St),n._=St):e._=St,St.VERSION="1.6.0";var xt=St.each=St[_]=function(e,t,n){if(e==i)return e;if(lt&&e[_]===lt)e[_](t,n);else if(e[r]===+e[r]){for(var o=0,u=e[r];o<u;o++)if(t[s](n,e[o],o,e)===tt)return}else{var a=St[N](e);for(var o=0,u=a[r];o<u;o++)if(t[s](n,e[a[o]],a[o],e)===tt)return}return e};St.map=St.collect=function(e,t,n){var r=[];return e==i?r:ct&&e.map===ct?e.map(t,n):(xt(e,function(e,i,o){r[y](t[s](n,e,i,o))}),r)};var Tt="Reduce of empty array with no initial value";St[A]=St.foldl=St.inject=function(e,t,n,o){var u=arguments[r]>2;e==i&&(e=[]);if(ht&&e[A]===ht)return o&&(t=St[R](t,o)),u?e[A](t,n):e[A](t);xt(e,function(e,r,i){u?n=t[s](o,n,e,r,i):(n=e,u=c)});if(!u)throw new TypeError(Tt);return n},St[h]=St.foldr=function(e,t,n,o){var u=arguments[r]>2;e==i&&(e=[]);if(pt&&e[h]===pt)return o&&(t=St[R](t,o)),u?e[h](t,n):e[h](t);var a=e[r];if(a!==+a){var f=St[N](e);a=f[r]}xt(e,function(r,i,l){i=f?f[--a]:--a,u?n=t[s](o,n,e[i],i,l):(n=e[i],u=c)});if(!u)throw new TypeError(Tt);return n},St.find=St.detect=function(e,t,n){var r;return Nt(e,function(e,i,o){if(t[s](n,e,i,o))return r=e,c}),r},St[g]=St.select=function(e,t,n){var r=[];return e==i?r:dt&&e[g]===dt?e[g](t,n):(xt(e,function(e,i,o){t[s](n,e,i,o)&&r[y](e)}),r)},St.reject=function(e,t,n){return St[g](e,function(e,r,i){return!t[s](n,e,r,i)},n)},St[O]=St.all=function(e,t,n){t||(t=St[v]);var r=c;return e==i?r:vt&&e[O]===vt?e[O](t,n):(xt(e,function(e,i,o){if(!(r=r&&t[s](n,e,i,o)))return tt}),!!r)};var Nt=St.some=St.any=function(e,t,n){t||(t=St[v]);var r=f;return e==i?r:mt&&e.some===mt?e.some(t,n):(xt(e,function(e,i,o){if(r||(r=t[s](n,e,i,o)))return tt}),!!r)};St[w]=St.include=function(e,t){return e==i?f:gt&&e[b]===gt?e[b](t)!=-1:Nt(e,function(e){return e===t})},St.invoke=function(e,t){var n=ot[s](arguments,2),r=St[u](t);return St.map(e,function(e){return(r?t:e[t])[o](e,n)})},St[X]=function(e,t){return St.map(e,St[I](t))},St.where=function(e,t){return St[g](e,St[U](t))},St.findWhere=function(e,t){return St.find(e,St[U](t))},St.max=function(e,t,n){if(!t&&St[l](e)&&e[0]===+e[0]&&e[r]<65535)return Math.max[o](Math,e);var i=-Infinity,u=-Infinity;return xt(e,function(e,r,o){var a=t?t[s](n,e,r,o):e;a>u&&(i=e,u=a)}),i},St.min=function(e,t,n){if(!t&&St[l](e)&&e[0]===+e[0]&&e[r]<65535)return Math.min[o](Math,e);var i=Infinity,u=Infinity;return xt(e,function(e,r,o){var a=t?t[s](n,e,r,o):e;a<u&&(i=e,u=a)}),i},St.shuffle=function(e){var t,n=0,r=[];return xt(e,function(e){t=St[q](n++),r[n-1]=r[t],r[t]=e}),r},St.sample=function(e,t,n){return t==i||n?(e[r]!==+e[r]&&(e=St[$](e)),e[St[q](e[r]-1)]):St.shuffle(e)[k](0,Math.max(0,t))};var Ct=function(e){return e==i?St[v]:St[u](e)?e:St[I](e)};St.sortBy=function(e,t,n){return t=Ct(t),St[X](St.map(e,function(e,r,i){return{value:e,index:r,criteria:t[s](n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var kt=function(e){return function(t,n,r){var i={};return n=Ct(n),xt(t,function(o,u){var a=n[s](r,o,u,t);e(i,a,o)}),i}};St.groupBy=kt(function(e,t,n){St[W](e,t)?e[t][y](n):e[t]=[n]}),St.indexBy=kt(function(e,t,n){e[t]=n}),St.countBy=kt(function(e,t){St[W](e,t)?e[t]++:e[t]=1}),St[V]=function(e,t,n,i){n=Ct(n);var o=n[s](i,t),u=0,a=e[r];while(u<a){var f=u+a>>>1;n[s](i,e[f])<o?u=f+1:a=f}return u},St.toArray=function(e){return e?St[l](e)?ot[s](e):e[r]===+e[r]?St.map(e,St[v]):St[$](e):[]},St.size=function(e){return e==i?0:e[r]===+e[r]?e[r]:St[N](e)[r]},St.first=St.head=St.take=function(e,t,n){return e==i?void 0:t==i||n?e[0]:t<0?[]:ot[s](e,0,t)},St.initial=function(e,t,n){return ot[s](e,0,e[r]-(t==i||n?1:t))},St.last=function(e,t,n){return e==i?void 0:t==i||n?e[e[r]-1]:ot[s](e,Math.max(e[r]-t,0))},St.rest=St.tail=St.drop=function(e,t,n){return ot[s](e,t==i||n?1:t)},St.compact=function(e){return St[g](e,St[v])};var Lt=function(e,t,n){return t&&St[O](e,St[l])?ut[o](n,e):(xt(e,function(e){St[l](e)||St[C
](e)?t?st[o](n,e):Lt(e,t,n):n[y](e)}),n)};St.flatten=function(e,t){return Lt(e,t,[])},St.without=function(e){return St.difference(e,ot[s](arguments,1))},St.partition=function(e,t){var n=[],r=[];return xt(e,function(e){(t(e)?n:r)[y](e)}),[n,r]},St.uniq=St.unique=function(e,t,n,i){St[u](t)&&(i=n,n=t,t=f);var s=n?St.map(e,n,i):e,o=[],a=[];return xt(s,function(n,i){if(t?!i||a[a[r]-1]!==n:!St[w](a,n))a[y](n),o[y](e[i])}),o},St.union=function(){return St.uniq(St.flatten(arguments,c))},St.intersection=function(e){var t=ot[s](arguments,1);return St[g](St.uniq(e),function(e){return St[O](t,function(t){return St[w](t,e)})})},St.difference=function(e){var t=ut[o](nt,ot[s](arguments,1));return St[g](e,function(e){return!St[w](t,e)})},St.zip=function(){var e=St.max(St[X](arguments,r)[S](0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=St[X](arguments,""+n);return t},St[H]=function(e,t){if(e==i)return{};var n={};for(var s=0,o=e[r];s<o;s++)t?n[e[s]]=t[s]:n[e[s][0]]=e[s][1];return n},St[b]=function(e,t,n){if(e==i)return-1;var s=0,o=e[r];if(n){if(typeof n!="number")return s=St[V](e,t),e[s]===t?s:-1;s=n<0?Math.max(0,o+n):n}if(gt&&e[b]===gt)return e[b](t,n);for(;s<o;s++)if(e[s]===t)return s;return-1},St[d]=function(e,t,n){if(e==i)return-1;var s=n!=i;if(yt&&e[d]===yt)return s?e[d](t,n):e[d](t);var o=s?n:e[r];while(o--)if(e[o]===t)return o;return-1},St.range=function(e,t,n){arguments[r]<=1&&(t=e||0,e=0),n=arguments[2]||1;var i=Math.max(Math.ceil((t-e)/n),0),s=0,o=new Array(i);while(s<i)o[s++]=e,e+=n;return o};var At=function(){};St[R]=function(e,t){var n,r;if(Et&&e[R]===Et)return Et[o](e,ot[s](arguments,1));if(!St[u](e))throw new TypeError;return n=ot[s](arguments,2),r=function(){if(this instanceof r){At[a]=e[a];var u=new At;At[a]=i;var f=e[o](u,n[S](ot[s](arguments)));return Object(f)===f?f:u}return e[o](t,n[S](ot[s](arguments)))}},St.partial=function(e){var t=ot[s](arguments,1);return function(){var n=0,i=t[k]();for(var s=0,u=i[r];s<u;s++)i[s]===St&&(i[s]=arguments[n++]);while(n<arguments[r])i[y](arguments[n++]);return e[o](this,i)}},St.bindAll=function(e){var t=ot[s](arguments,1);if(t[r]===0)throw new Error("bindAll must be passed function names");return xt(t,function(t){e[t]=St[R](e[t],e)}),e},St.memoize=function(e,t){var n={};return t||(t=St[v]),function(){var r=t[o](this,arguments);return St[W](n,r)?n[r]:n[r]=e[o](this,arguments)}},St.delay=function(e,t){var n=ot[s](arguments,2);return setTimeout(function(){return e[o](i,n)},t)},St.defer=function(e){return St.delay[o](St,[e,1][S](ot[s](arguments,1)))},St.throttle=function(e,t,n){var r,s,u,a=i,l=0;n||(n={});var c=function(){l=n.leading===f?0:St.now(),a=i,u=e[o](r,s),r=s=i};return function(){var h=St.now();!l&&n.leading===f&&(l=h);var p=t-(h-l);return r=this,s=arguments,p<=0?(clearTimeout(a),a=i,l=h,u=e[o](r,s),r=s=i):!a&&n.trailing!==f&&(a=setTimeout(c,p)),u}},St.debounce=function(e,t,n){var r,s,u,a,f,l=function(){var c=St.now()-a;c<t?r=setTimeout(l,t-c):(r=i,n||(f=e[o](u,s),u=s=i))};return function(){u=this,s=arguments,a=St.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(f=e[o](u,s),u=s=i),f}},St.once=function(e){var t=f,n;return function(){return t?n:(t=c,n=e[o](this,arguments),e=i,n)}},St.wrap=function(e,t){return St.partial(t,e)},St.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e[r]-1;n>=0;n--)t=[e[n][o](this,t)];return t[0]}},St.after=function(e,t){return function(){if(--e<1)return t[o](this,arguments)}},St[N]=function(e){if(!St[F](e))return[];if(wt)return wt(e);var t=[];for(var n in e)St[W](e,n)&&t[y](n);return t},St[$]=function(e){var t=St[N](e),n=t[r],i=new Array(n);for(var s=0;s<n;s++)i[s]=e[t[s]];return i},St.pairs=function(e){var t=St[N](e),n=t[r],i=new Array(n);for(var s=0;s<n;s++)i[s]=[t[s],e[t[s]]];return i},St.invert=function(e){var t={},n=St[N](e);for(var i=0,s=n[r];i<s;i++)t[e[n[i]]]=n[i];return t},St.functions=St.methods=function(e){var t=[];for(var n in e)St[u](e[n])&&t[y](n);return t.sort()},St[K]=function(e){return xt(ot[s](arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},St.pick=function(e){var t={},n=ut[o](nt,ot[s](arguments,1));return xt(n,function(n){n in e&&(t[n]=e[n])}),t},St.omit=function(e){var t={},n=ut[o](nt,ot[s](arguments,1));for(var r in e)St[w](n,r)||(t[r]=e[r]);return t},St.defaults=function(e){return xt(ot[s](arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},St.clone=function(e){return St[F](e)?St[l](e)?e[k]():St[K]({},e):e},St.tap=function(e,t){return t(e),e};var Ot=function(e,t,n,o){if(e===t)return e!==0||1/e==1/t;if(e==i||t==i)return e===t;e instanceof St&&(e=e[p]),t instanceof St&&(t=t[p]);var a=at[s](e);if(a!=at[s](t))return f;switch(a){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case T:return+e==+t;case"[object RegExp]":return e[E]==t[E]&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!=H||typeof t!=H)return f;var l=n[r];while(l--)if(n[l]==e)return o[l]==t;var h=e[m],d=t[m];if(h!==d&&!(St[u](h)&&h instanceof h&&St[u](d)&&d instanceof d)&&m in e&&m in t)return f;n[y](e),o[y](t);var v=0,g=c;if(a==L){v=e[r],g=v==t[r];if(g)while(v--)if(!(g=Ot(e[v],t[v],n,o)))break}else{for(var b in e)if(St[W](e,b)){v++;if(!(g=St[W](t,b)&&Ot(e[b],t[b],n,o)))break}if(g){for(b in t)if(St[W](t,b)&&!(v--))break;g=!v}}return n.pop(),o.pop(),g};St.isEqual=function(e,t){return Ot(e,t,[],[])},St.isEmpty=function(e){if(e==i)return c;if(St[l](e)||St.isString(e))return e[r]===0;for(var t in e)if(St[W](e,t))return f;return c},St.isElement=function(e){return!!e&&e.nodeType===1},St[l]=bt||function(e){return at[s](e)==L},St[F]=function(e){return e===Object(e)},xt(["Arguments","Function","String","Number","Date","RegExp"],function(e){St["is"+e]=function(t){return at[s](t)=="[object "+e+"]"}}),St[C](arguments)||(St[C]=function(e){return!!e&&!!St[W](e,"callee")}),typeof /./!==x&&(St[u]=function(e){return typeof e===x}),St.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},St.isNaN=function(e){return St.isNumber(e)&&e!=+e},St.isBoolean=function(e){return e===c||e===f||at[s](e)==T},St.isNull=function(e){return e===i},St.isUndefined=function(e){return e===void 0},St[W]=function(e,t){return ft[s](e,t)},St.noConflict=function(){return e._=et,this},St[v]=function(e){return e},St.constant=function(e){return function(){return e}},St[I]=function(e){return function(t){return t[e]}},St[U]=function(e){return function(t){if(t===e)return c;for(var n in e)if(e[n]!==t[n])return f;return c}},St.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t[s](n,i);return r},St[q]=function(e,t){return t==i&&(t=e,e=0),e+Math.floor(Math[q]()*(t-e+1))},St.now=Date.now||function(){return(new Date).getTime()};var Mt={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};Mt[P]=St.invert(Mt[M]);var _t={escape:new RegExp("["+St[N](Mt[M])[z]("")+"]","g"),unescape:new RegExp("("+St[N](Mt[P])[z]("|")+")","g")};St.each([M,P],function(e){St[e]=function(t){return t==i?"":(""+t).replace(_t[e],function(t){return Mt[e][t]})}}),St.result=function(e,t){if(e==i)return void 0;var n=e[t];return St[u](n)?n[s](e):n},St.mixin=function(e){xt(St.functions(e),function(t){var n=St[t]=e[t];St[a][t]=function(){var e=[this[p]];return st[o](e,arguments),jt[s](this,n[o](St,e))}})};var Dt=0;St.uniqueId=function(e){var t=++Dt+"";return e?e+t:t},St[B]={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Pt=/(.)^/,Ht={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},Bt=/\\|'|\r|\n|\t|\u2028|\u2029/g;St.template=function(e,t,n){var i;n=St.defaults({},n,St[B]);var o=new RegExp([(n[M]||Pt)[E],(n.interpolate||Pt)[E],(n.evaluate||Pt)[E]][z]("|")+"|$","g"),u=0,a="__p+='";e.replace(o,function(t,n,i,s,o){return a+=e[k](u,o).replace(Bt,function(e){return"\\"+Ht[e]}),n&&(a+=D+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+=D+i+"))==null?'':__t)+\n'"),s&&(a+="';\n"+s+"\n__p+='"),u=o+t[r],t}),a+="';\n",n[J]||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n[J]||"obj","_",a)}catch(f){throw f[E]=a,f}if(t)return i(t,St);var l=function(e){return i[s](this,e,St)};return l[E]="function("+(n[J]||"obj")+"){\n"+a+"}",l},St.chain=function(e){return St(e).chain()};var jt=function(e){return this._chain?St(e).chain():e};St.mixin(St),xt(["pop",y,"reverse","shift","sort","splice","unshift"],function(e){var t=nt[e];St[a][e]=function(){var n=this[p];return t[o](n,arguments),(e=="shift"||e=="splice")&&n[r]===0&&delete n[0],jt[s](this,n)}}),xt([S,z,k],function(e){var t=nt[e];St[a][e]=function(){return jt[s](this,t[o](this[p],arguments))}}),St[K](St[a],{chain:function(){return this._chain=c,this},value:function(){return this[p]}}),typeof define===x&&define.amd&&define("underscore",[],function(){return St})}))[s](this)},{}],18:[function(e,t,n){(function(e,n){"use strict";function Pt(){if(Dt.READY)return;Dt[ut].determineEventTypes(),Dt[u][I](Dt[f],function(e){Dt[r].register(e)}),Dt[ut].onTouch(Dt[Y],Dt[g],Dt[r].detect),Dt[ut].onTouch(Dt[Y],Dt[a],Dt[r].detect),Dt.READY=x}var r="detection",i=!1,s="current",o="options",u="utils",a="EVENT_END",f="gestures",l="triggered",c="trigger",h="touches",p="lastEvent",d="EVENT_START",v="length",m="HAS_POINTEREVENTS",g="EVENT_MOVE",y="center",b="POINTER_MOUSE",w="PointerEvent",E="eventType",S="stop_browser_behavior",x=!0,T="_eventHandler",N="EVENT_TYPES",C="none",k="preventDefault",L="direction",A="timeStamp",O="pageX",M="pageY",_="DIRECTION_DOWN",D="reachedTapMaxDistance",P="POINTER_TOUCH",H="name",B="drag_locked_to_axis",j="removeEventListener",F="DIRECTION_UP",I="each",q="distance",R="match",U="element",z="DIRECTION_RIGHT",W="DIRECTION_LEFT",X="end",V="srcEvent",$="UPDATE_VELOCITY_INTERVAL",J="substring",K="stopDetect",Q="POINTER_PEN",G="pointers",Y="DOCUMENT",Z="defaults",et="getAngle",tt="getDistance",nt="transform_min_rotation",rt=null,it="extend",st="start",ot="style",ut="event",at="navigator",ft="pointerType",lt="transform_min_scale",ct="preventManipulation",ht="velocity",pt="undefined",dt="_eventStartHandler",vt="HAS_TOUCHEVENTS",mt="swipe_max_touches",gt="drag_min_distance",yt="isVertical",bt="NO_MOUSEEVENTS",wt="Instance",Et="lastVEvent",St="startEvent",xt="drag_max_touches",Tt="addEventListener",Nt="stopped",Ct="extendEventData",kt="pointerId",Lt="hold",At="swipe_velocity",Ot="onselectstart",Mt="index",_t="updatePointer",Dt=function(e,t){return new Dt[wt](e,t||{})};Dt[Z]={stop_browser_behavior:{userSelect:C,touchAction:C,touchCallout:C,contentZooming:C,userDrag:C,tapHighlightColor:"rgba(0,0,0,0)"}},Dt[m]=e[at].pointerEnabled||e[at].msPointerEnabled,Dt[vt]="ontouchstart"in e,Dt.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,Dt[bt]=Dt[vt]&&e[at].userAgent[R](Dt.MOBILE_REGEX),Dt[N]={},Dt[_]="down",Dt[W]="left",Dt[F]="up",Dt[z]="right",Dt[b]="mouse",Dt[P]="touch",Dt[Q]="pen",Dt[$]=20,Dt[d]=st,Dt[g]="move",Dt[a]=X,Dt[Y]=e.document,Dt.plugins=Dt.plugins||{},Dt[f]=Dt[f]||{},Dt.READY=i,Dt[u]={extend:function(t,r,i){for(var s in r){if(t[s]!==n&&i)continue;t[s]=r[s]}return t},each:function(e,t,r){var s,o;if("forEach"in e)e.forEach(t,r);else if(e[v]!==n){for(s=0,o=e[v];s<o;s++)if(t.call(r,e[s],s,e)===i)return}else for(s in e)if(e.hasOwnProperty(s)&&t.call(r,e[s],s,e)===i)return},hasParent:function(e,t){while(e){if(e==t)return x;e=e.parentNode}return i},getCenter:function(t){var n=[],r=[];return Dt[u][I](t,function(e){n.push(typeof e.clientX!==pt?e.clientX:e[O]),r.push(typeof e.clientY!==pt?e.clientY:e[M])}),{pageX:(Math.min.apply(Math,n)+Math.max.apply(Math,n))/2,pageY:(Math.min.apply(Math,r)+Math.max.apply(Math,r))/2}},getVelocity:function(t,n,r){return{x:Math.abs(n/t)||0,y:Math.abs(r/t)||0}},getAngle:function(t,n){var r=n[M]-t[M],i=n[O]-t[O];return Math.atan2(r,i)*180/Math.PI},getDirection:function(t,n){var r=Math.abs(t[O]-n[O]),i=Math.abs(t[M]-n[M]);return r>=i?t[O]-n[O]>0?Dt[W]:Dt[z]:t[M]-n[M]>0?Dt[F]:Dt[_]},getDistance:function(t,n){var r=n[O]-t[O],i=n[M]-t[M];return Math.sqrt(r*r+i*i)},getScale:function(t,n){return t[v]>=2&&n[v]>=2?this[tt](n[0],n[1])/this[tt](t[0],t[1]):1},getRotation:function(t,n){return t[v]>=2&&n[v]>=2?this[et](n[1],n[0])-this[et](t[1],t[0]):0},isVertical:function(t){return t==Dt[F]||t==Dt[_]},stopDefaultBrowserBehavior:function(t,n){if(!n||!t||!t[ot])return;Dt[u][I](["webkit","khtml","moz","Moz","ms","o",""],function(e){Dt[u][I](n,function(n,r){e&&(r=e+r[J](0,1).toUpperCase()+r[J](1)),r in t[ot]&&(t[ot][r]=n)})}),n.userSelect==C&&(t[Ot]=function(){return i}),n.userDrag==C&&(t.ondragstart=function(){return i})},startDefaultBrowserBehavior:function(t,n){if(!n||!t||!t[ot])return;Dt[u][I](["webkit","khtml","moz","Moz","ms","o",""],function(e){Dt[u][I](n,function(n,r){e&&(r=e+r[J](0,1).toUpperCase()+r[J](1)),r in t[ot]&&(t[ot][r]="")})}),n.userSelect==C&&(t[Ot]=rt),n.userDrag==C&&(t.ondragstart=rt)}},Dt[wt]=function(e,t){var n=this;return Pt(),this[U]=e,this.enabled=x,this[o]=Dt[u][it](Dt[u][it]({},Dt[Z]),t||{}),this[o][S]&&Dt[u].stopDefaultBrowserBehavior(this[U],this[o][S]),this[dt]=Dt[ut].onTouch(e,Dt[d],function(e){n.enabled&&Dt[r].startDetect(n,e)}),this[T]=[],this},Dt[wt].prototype={on:function(t,n){var r=t.split(" ");return Dt[u][I](r,function(e){this[U][Tt](e,n,i),this[T].push({gesture:e,handler:n})},this),this},off:function(t,n){var r=t.split(" ");return Dt[u][I](r,function(e){this[U][j](e,n,i);var t=-1;Dt[u][I](this[T],function(r,i){t===-1&&r.gesture===e&&r.handler===n&&(t=i)},this),t>-1&&this[T].splice(t,1)},this),this},trigger:function(t,n){n||(n={});var r=Dt[Y].createEvent("Event");r.initEvent(t,x,x),r.gesture=n;var i=this[U];return Dt[u].hasParent(n.target,i)&&(i=n.target),i.dispatchEvent(r),this},enable:function(t){return this.enabled=t,this},dispose:function(){return this[o][S]&&Dt[u].startDefaultBrowserBehavior(this[U],this[o][S]),Dt[u][I](this[T],function(e){this[U][j](e.gesture,e.handler,i)},this),this[T][v]=0,Dt[ut].unbindDom(this[U],Dt[N][Dt[d]],this[dt]),this}};var Ht=rt,Bt=i,jt=i;Dt[ut]={bindDom:function(e,t,n){var r=t.split(" ");Dt[u][I](r,function(t){e[Tt](t,n,i)})},unbindDom:function(e,t,n){var r=t.split(" ");Dt[u][I](r,function(t){e[j](t,n,i)})},onTouch:function(t,n,s){var o=this,u=function(u){var f=u.type.toLowerCase();if(f[R](/mouse/)&&jt)return;f[R](/touch/)||f[R](/pointerdown/)||f[R](/mouse/)&&u.which===1?Bt=x:f[R](/mouse/)&&!u.which&&(Bt=i),f[R](/touch|pointer/)&&(jt=x);var l=0;if(Bt){Dt[m]&&n!=Dt[a]?l=Dt[w][_t](n,u):f[R](/touch/)?l=u[h][v]:jt||(l=f[R](/up/)?0:1),l>0&&n==Dt[a]?n=Dt[g]:l||(n=Dt[a]);if(l||Ht===rt)Ht=u;s.call(Dt[r],o.collectEventData(t,n,o.getTouchList(Ht,n),u)),Dt[m]&&n==Dt[a]&&(l=Dt[w][_t](n,u))}l||(Ht=rt,Bt=i,jt=i,Dt[w].reset())};return this.bindDom(t,Dt[N][n],u),u},determineEventTypes:function(){var t;Dt[m]?t=Dt[w].getEvents():Dt[bt]?t=["touchstart","touchmove","touchend touchcancel"]:t=["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],Dt[N][Dt[d]]=t[0],Dt[N][Dt[g]]=t[1],Dt[N][Dt[a]]=t[2]},getTouchList:function(t){return Dt[m]?Dt[w].getTouchList():t[h]?t[h]:(t.identifier=1,[t])},collectEventData:function(t,n,i,s){var o=Dt[P];if(s.type[R](/mouse/)||Dt[w].matchType(Dt[b],s))o=Dt[b];return{center:Dt[u].getCenter(i),timeStamp:(new Date).getTime(),target:s.target,touches:i,eventType:n,pointerType:o,srcEvent:s,preventDefault:function(){this[V][ct]&&this[V][ct](),this[V][k]&&this[V][k]()},stopPropagation:function(){this[V].stopPropagation()},stopDetect:function(){return Dt[r][K]()}}}},Dt[w]={pointers:{},getTouchList:function(){var e=this,t=[];return Dt[u][I](e[G],function(e){t.push(e)}),t},updatePointer:function(e,t){return e==Dt[a]?delete this[G][t[kt]]:(t.identifier=t[kt],this[G][t[kt]]=t),Object.keys(this[G])[v]},matchType:function(e,t){if(!t[ft])return i;var n=t[ft],r={};return r[Dt[b]]=n===t.MSPOINTER_TYPE_MOUSE||n===Dt[b],r[Dt[P]]=n===t.MSPOINTER_TYPE_TOUCH||n===Dt[P],r[Dt[Q]]=n===t.MSPOINTER_TYPE_PEN||n===Dt[Q],r[e]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this[G]={}}},Dt[r]={gestures:[],current:rt,previous:rt,stopped:i,startDetect:function(t,n){if(this[s])return;this[Nt]=i,this[s]={inst:t,startEvent:Dt[u][it]({},n),lastEvent:i,lastVEvent:i,velocity:i,name:""},this.detect(n)},detect:function(t){if(!this[s]||this[Nt])return;t=this[Ct](t);var n=this[s].inst[o];return Dt[u][I](this[f],function(e){if(!this[Nt]&&n[e[H]]!==i&&e.handler.call(e,t,this[s].inst)===i)return this[K](),i},this),this[s]&&(this[s][p]=t),t[E]==Dt[a]&&!t[h][v]-1&&this[K](),t},stopDetect:function(){this.previous=Dt[u][it]({},this[s]),this[s]=rt,this[Nt]=x},extendEventData:function(t){var n=this[s][St],r=this[s][Et];n&&(t[h][v]!=n[h][v]||t[h]===n[h])&&(n[h]=[],Dt[u][I](t[h],function(e){n[h].push(Dt[u][it]({},e))}));var o=t[A]-n[A],a=t[y][O]-n[y][O],f=t[y][M]-n[y][M],l,c,d=this[s][ht];return r!==i&&t[A]-r[A]>Dt[$]?(d=Dt[u].getVelocity(t[A]-r[A],t[y][O]-r[y][O],t[y][M]-r[y][M]),this[s][Et]=t,d.x>0&&d.y>0&&(this[s][ht]=d)):this[s][ht]===i&&(d=Dt[u].getVelocity(o,a,f),this[s][ht]=d,this[s][Et]=t),t[E]===X?(l=this[s][p]&&this[s][p].interimAngle,c=this[s][p]&&this[s][p].interimDirection):(l=this[s][p]&&Dt[u][et](this[s][p][y],t[y]),c=this[s][p]&&Dt[u].getDirection(this[s][p][y],t[y])),Dt[u][it](t,{deltaTime:o,deltaX:a,deltaY:f,velocityX:d.x,velocityY:d.y,distance:Dt[u][tt](n[y],t[y]),angle:Dt[u][et](n[y],t[y]),interimAngle:l,direction:Dt[u].getDirection(n[y],t[y]),interimDirection:c,scale:Dt[u].getScale(n[h],t[h]),rotation:Dt[u].getRotation(n[h],t[h]),startEvent:n}),t},register:function(t){var r=t[Z]||{};return r[t[H]]===n&&(r[t[H]]=x),Dt[u][it](Dt[Z],r,x),t[Mt]=t[Mt]||1e3,this[f].push(t),this[f].sort(function(e,t){return e[Mt]<t[Mt]?-1:e[Mt]>t[Mt]?1:0}),this[f]}},Dt[f].Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:x,drag_max_touches:1,drag_block_horizontal:i,drag_block_vertical:i,drag_lock_to_axis:i,drag_lock_min_distance:25},triggered:i,handler:function(t,n){if(Dt[r][s][H]!=this[H]&&this[l]){n[c](this[H]+X,t),this[l]=i;return}if(n[o][xt]>0&&t[h][v]>n[o][xt])return;switch(t[E]){case Dt[d]:this[l]=i;break;case Dt[g]:if(t[q]<n[o][gt]&&Dt[r][s][H]!=this[H])return;if(Dt[r][s][H]!=this[H]){Dt[r][s][H]=this[H];if(n[o].correct_for_drag_min_distance&&t[q]>0){var f=Math.abs(n[o][gt]/t[q]);Dt[r][s][St][y][O]+=t.deltaX*f,Dt[r][s][St][y][M]+=t.deltaY*f,t=Dt[r][Ct](t)}}if(Dt[r][s][p][B]||n[o].drag_lock_to_axis&&n[o].drag_lock_min_distance<=t[q])t[B]=x;var m=Dt[r][s][p][L];t[B]&&m!==t[L]&&(Dt[u][yt](m)?t[L]=t.deltaY<0?Dt[F]:Dt[_]:t[L]=t.deltaX<0?Dt[W]:Dt[z]),this[l]||(n[c](this[H]+st,t),this[l]=x),n[c](this[H],t),n[c](this[H]+t[L],t),(n[o].drag_block_vertical&&Dt[u][yt](t[L])||n[o].drag_block_horizontal&&!Dt[u][yt](t[L]))&&t[k]();break;case Dt[a]:this[l]&&n[c](this[H]+X,t),this[l]=i}}},Dt[f].Hold={name:Lt,index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:rt,handler:function(t,n){switch(t[E]){case Dt[d]:clearTimeout(this.timer),Dt[r][s][H]=this[H],this.timer=setTimeout(function(){Dt[r][s][H]==Lt&&n[c](Lt,t)},n[o].hold_timeout);break;case Dt[g]:t[q]>n[o].hold_threshold&&clearTimeout(this.timer);break;case Dt[a]:clearTimeout(this.timer)}}},Dt[f].Release={name:"release",index:Infinity,handler:function(t,n){t[E]==Dt[a]&&n[c](this[H],t)}},Dt[f].Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(t,n){if(t[E]==Dt[a]){if(n[o][mt]>0&&t[h][v]<n[o].swipe_min_touches&&t[h][v]>n[o][mt])return;if(t.velocityX>n[o][At]||t.velocityY>n[o][At])n[c](this[H],t),n[c](this[H]+t[L],t)}}},Dt[f].Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:x,doubletap_distance:20,doubletap_interval:300},handler:function(t,n){if(t[E]==Dt[g]&&!Dt[r][s][D])Dt[r][s][D]=t[q]>n[o].tap_max_distance;else if(t[E]==Dt[a]&&t[V].type!="touchcancel"){var u=Dt[r].previous,f=i;if(Dt[r][s][D]||t.deltaTime>n[o].tap_max_touchtime)return;u&&u[H]=="tap"&&t[A]-u[p][A]<n[o].doubletap_interval&&t[q]<n[o].doubletap_distance&&(n[c]("doubletap",t),f=x);if(!f||n[o].tap_always)Dt[r][s][H]="tap",n[c](Dt[r][s][H],t)}}},Dt[f].Touch={name:"touch",index:-Infinity,defaults:{prevent_default:i,prevent_mouseevents:i},handler:function(t,n){if(n[o].prevent_mouseevents&&t[ft]==Dt[b]){t[K]();return}n[o].prevent_default&&t[k](),t[E]==Dt[d]&&n[c](this[H],t)}},Dt[f].Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:i},triggered:i,handler:function(t,n){if(Dt[r][s][H]!=this[H]&&this[l]){n[c](this[H]+X,t),this[l]=i;return}if(t[h][v]<2)return;n[o].transform_always_block&&t[k]();switch(t[E]){case Dt[d]:this[l]=i;break;case Dt[g]:var u=Math.abs(1-t.scale),f=Math.abs(t.rotation);if(u<n[o][lt]&&f<n[o][nt])return;Dt[r][s][H]=this[H],this[l]||(n[c](this[H]+st,t),this[l]=x),n[c](this[H],t),f>n[o][nt]&&n[c]("rotate",t),u>n[o][lt]&&(n[c]("pinch",t),n[c]("pinch"+(t.scale<1?"in":"out"),t));break;case Dt[a]:this[l]&&n[c](this[H]+X,t),this[l]=i}}},typeof define=="function"&&define.amd?define(function(){return Dt}):typeof t=="object"&&t.exports?t.exports=Dt:e.Hammer=Dt})(window)},{}],19:[function(e,t,n){function g(){this[r]=this[r]||{},this[i]=this[i]||undefined}function y(e){return typeof e===d}function b(e){return typeof e=="number"}function w(e){return typeof e=="object"&&e!==null}function E(e){return e===void 0}var r="_events",i="_maxListeners",s="prototype",o="defaultMaxListeners",u="error",a="length",f=!0,l="addListener",c="listener must be a function",h="newListener",p="listener",d="function",v="removeListener",m="removeAllListeners";t.exports=g,g.EventEmitter=g,g[s][r]=undefined,g[s][i]=undefined,g[o]=10,g[s].setMaxListeners=function(e){if(!b(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this[i]=e,this},g[s].emit=function(e){var t,n,i,s,o,l;this[r]||(this[r]={});if(e===u)if(!this[r][u]||w(this[r][u])&&!this[r][u][a])throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');n=this[r][e];if(E(n))return!1;if(y(n))switch(arguments[a]){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=arguments[a],s=new Array(i-1);for(o=1;o<i;o++)s[o-1]=arguments[o];n.apply(this,s)}else if(w(n)){i=arguments[a],s=new Array(i-1);for(o=1;o<i;o++)s[o-1]=arguments[o];l=n.slice(),i=l[a];for(o=0;o<i;o++)l[o].apply(this,s)}return f},g[s][l]=function(e,t){var n;if(!y(t))throw TypeError(c);this[r]||(this[r]={}),this[r][h]&&this.emit(h,e,y(t[p])?t[p]:t),this[r][e]?w(this[r][e])?this[r][e].push(t):this[r][e]=[this[r][e],t]:this[r][e]=t;if(w(this[r][e])&&!this[r][e].warned){var n;E(this[i])?n=g[o]:n=this[i],n&&n>0&&this[r][e][a]>n&&(this[r][e].warned=f,console[u]("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this[r][e][a]),typeof console.trace===d&&console.trace())}return this},g[s].on=g[s][l],g[s].once=function(e,t){function r(){this[v](e,r),n||(n=f,t.apply(this,arguments))}if(!y(t))throw TypeError(c);var n=!1;return r[p]=t,this.on(e,r),this},g[s][v]=function(e,t){var n,i,s,o;if(!y(t))throw TypeError(c);if(!this[r]||!this[r][e])return this;n=this[r][e],s=n[a],i=-1;if(n===t||y(n[p])&&n[p]===t)delete this[r][e],this[r][v]&&this.emit(v,e,t);else if(w(n)){for(o=s;o-->0;)if(n[o]===t||n[o][p]&&n[o][p]===t){i=o;break}if(i<0)return this;n[a]===1?(n[a]=0,delete this[r][e]):n.splice(i,1),this[r][v]&&this.emit(v,e,t)}return this},g[s][m]=function(e){var t,n;if(!this[r])return this;if(!this[r][v])return arguments[a]===0?this[r]={}:this[r][e]&&delete this[r][e],this;if(arguments[a]===0){for(t in this[r]){if(t===v)continue;this[m](t)}return this[m](v),this[r]={},this}n=this[r][e];if(y(n))this[v](e,n);else while(n[a])this[v](e,n[n[a]-1]);return delete this[r][e],this},g[s].listeners=function(e){var t;return!this[r]||!this[r][e]?t=[]:y(this[r][e])?t=[this[r][e]]:t=this[r][e].slice(),t},g.listenerCount=function(e,t){var n;return!e[r]||!e[r][t]?n=0:y(e[r][t])?n=1:n=e[r][t][a],n}},{}]},{},[13]);